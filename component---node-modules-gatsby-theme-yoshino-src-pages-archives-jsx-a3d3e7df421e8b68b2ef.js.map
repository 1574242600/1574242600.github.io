{"version":3,"sources":["webpack:///./node_modules/gatsby-theme-yoshino/src/pages/archives.jsx","webpack:///./node_modules/gatsby-theme-yoshino/src/pages/style/archives.module.css"],"names":["Archives","props","dateToString","date","getMonth","getDate","toYearKey","edges","result","forEach","node","year","Date","frontmatter","getFullYear","undefined","push","renderTimeLine","data","yearIndex","Object","keys","reverse","map","key","id","title","slug","fields","dateTime","to","render","this","allMarkdownRemark","className","ArchivesStyle","archivesCard","archivesList","React","Component","module","exports"],"mappings":"4NAMqBA,E,YACjB,WAAaC,GAAQ,OACjB,YAAMA,IADU,K,4CAIpBC,aAAA,SAAaC,GACT,OAAUA,EAAKC,WAAa,EAA5B,IAAiCD,EAAKE,W,EAG1CC,UAAA,SAAUC,GACN,IAAMC,EAAS,GASf,OAPAD,EAAME,SAAQ,YAAe,IAAZC,EAAW,EAAXA,KAEPC,EADO,IAAIC,KAAKF,EAAKG,YAAYV,MACrBW,mBACGC,IAAjBP,EAAOG,KAAuBH,EAAOG,GAAQ,IACjDH,EAAOG,GAAMK,KAAKN,MAGfF,G,EAGXS,eAAA,SAAeC,GAAO,IAAD,OACXC,EAAYC,OAAOC,KAAKH,GAAMI,UAEpC,OACI,4BACMH,EAAUI,KAAI,SAACZ,GACb,OACI,wBAAIa,IAAMb,GACN,4BAAMA,GACN,4BACMO,EAAKP,GAAMY,KAAI,SAACb,GAAU,IAChBe,EAAuDf,EAAvDe,GADe,EACwCf,EAAnDG,YAAea,EADJ,EACIA,MAAOvB,EADX,EACWA,KAAkBwB,EAAWjB,EAArBkB,OAAUD,KACpD,OACI,wBAAIH,IAAMC,GACN,0BAAMI,SAAW1B,GAAS,EAAKD,aAAa,IAAIU,KAAKT,KACrD,kBAAC,IAAD,CAAM2B,GAAKH,GAASD,c,EAY5DK,OAAA,WACI,IAAMxB,EAAQyB,KAAK/B,MAAMiB,KAAKe,kBAAkB1B,MAEhD,OACI,yBAAK2B,UAAYC,IAAcC,cAC3B,kBAAC,IAAD,CAAKV,MAAQ,OAEb,kCACA,yBAAKQ,UAAYC,IAAcE,cACzBL,KAAKf,eAAee,KAAK1B,UAAUC,O,GA1DnB+B,IAAMC,Y,qBCL5CC,EAAOC,QAAU,CAAC,aAAe,wCAAwC,aAAe","file":"component---node-modules-gatsby-theme-yoshino-src-pages-archives-jsx-a3d3e7df421e8b68b2ef.js","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { graphql, Link } from \"gatsby\";\r\nimport ArchivesStyle from \"./style/archives.module.css\";\r\nimport Seo from \"components/global/seo\";\r\n\r\nexport default class Archives extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n    }\r\n\r\n    dateToString(date) {\r\n        return `${date.getMonth() + 1}-${date.getDate()}`;\r\n    }\r\n\r\n    toYearKey(edges) {\r\n        const result = {};\r\n\r\n        edges.forEach(({ node }) => {\r\n            const date = new Date(node.frontmatter.date);\r\n            const year = date.getFullYear();\r\n            if (result[year] === undefined) { result[year] = []; }\r\n            result[year].push(node);\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    renderTimeLine(data) {\r\n        const yearIndex = Object.keys(data).reverse();\r\n\r\n        return (\r\n            <ul>\r\n                { yearIndex.map((year) => {\r\n                    return (\r\n                        <li key={ year }>\r\n                            <h3>{ year }</h3>\r\n                            <ul>\r\n                                { data[year].map((node) => {\r\n                                    const { id, frontmatter: { title, date }, fields: { slug } } = node;\r\n                                    return (\r\n                                        <li key={ id }>\r\n                                            <time dateTime={ date }>{ this.dateToString(new Date(date)) }</time>\r\n                                            <Link to={ slug }>{ title }</Link>\r\n                                        </li>\r\n                                    );\r\n                                }) }\r\n                            </ul>\r\n                        </li>\r\n                    );\r\n                }) }\r\n            </ul>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const edges = this.props.data.allMarkdownRemark.edges;\r\n\r\n        return (\r\n            <div className={ ArchivesStyle.archivesCard }>\r\n                <Seo title={ \"归档\" } >\r\n                </Seo>\r\n                <h1>归档</h1>\r\n                <div className={ ArchivesStyle.archivesList }>\r\n                    { this.renderTimeLine(this.toYearKey(edges)) }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nArchives.propTypes = {\r\n    data: PropTypes.object\r\n};\r\n\r\nexport const query = graphql`\r\n    query archivesQuery{\r\n        allMarkdownRemark(sort: {fields: [frontmatter___date], order: DESC} filter: {fileAbsolutePath: {regex: \"/(?<!about)\\\\\\\\.md$/\"}}) {\r\n            edges {\r\n                node {\r\n                    id\r\n                    frontmatter { \r\n                        title\r\n                        date\r\n                    }\r\n                    fields {\r\n                        slug\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"archivesCard\":\"archives-module--archives-card--1Rizv\",\"archivesList\":\"archives-module--archives-list--2FkQN\"};"],"sourceRoot":""}