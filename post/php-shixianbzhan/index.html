<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.4ce8db32938f17a7dafa.css" id="gatsby-global-css">@media (min-width:992px){.layout-module--sidebar-open-offset--3lG32{margin-left:300px}}.layout-module--pages--16eZ4{margin-top:80px;display:flex;flex-wrap:wrap;justify-content:center}.toolbar-module--toolbar--1GBl7{position:fixed;top:0;left:0;right:0;z-index:100;padding:12px;background-color:var(--primary-color)}.toolbar-module--toolbar-shadow--2zjJP{box-shadow:0 0 10px rgba(0,0,0,.5)}.toolbar-module--icon--3lesc{color:#eee;font-size:32px}.toolbar-module--title--3e0YB{color:#eee;font-size:24px;padding-left:24px}.dark .toolbar-module--toolbar--1GBl7{background-color:var(--dark-primary-color)}.dark .toolbar-module--icon--3lesc,.dark .toolbar-module--title--3e0YB{color:var(--dark-accent-text-color)}.icon-module--icon--2wDQu{display:inline-block;line-height:1}.icon-module--icon--2wDQu svg{width:1em;height:1em;fill:currentColor;vertical-align:-.15em}.authorCard-module--text-center--1lvKW{text-align:center}.authorCard-module--avatar--1s-zn>img{margin-bottom:0}.authorCard-module--avatar-circle--2ne8N{border-radius:50%;overflow:hidden}.authorCard-module--name--2KPL8{color:var(--accent-text-color);font-size:20px;padding-top:4px}.authorCard-module--dark--2N9hl .name{color:var(--dark-accent-text-color)}.authorCard-module--description--2LRcT{font-size:15px;word-wrap:break-word;word-break:break-all;white-space:normal;color:rgba(0,0,0,.5)}.sidebar-module--overlay--3AuUC{position:fixed;z-index:500;bottom:0;left:0;top:0;right:0;background:rgba(0,0,0,.4)}.sidebar-module--sidebar--2nyyN{position:fixed;bottom:0;left:0;z-index:1000;box-sizing:border-box;overflow-x:hidden;overflow-y:auto;white-space:nowrap;will-change:transform;width:calc(100% - 64px);height:calc(100vh - 58px);background-color:var(--accent-background-color)}.dark .sidebar-module--sidebar--2nyyN{background-color:var(--dark-accent-background-color)}.sidebar-module--open--1ehas{transform:translateX(0)!important}.sidebar-module--close--2qQlt{transform:translateX(-280px);box-shadow:none!important}@-moz-document url-prefix(){.sidebar-module--sidebar--2nyyN{height:calc(100vh - 67px)}}@media (min-width:992px){.sidebar-module--sidebar--2nyyN{max-width:280px}.sidebar-module--sidebar-shadow--1vEHZ{box-shadow:1px 2px 0 1px var(--divider-color)}.dark .sidebar-module--sidebar-shadow--1vEHZ{box-shadow:1px 2px 0 1px var(--dark-divider-color)}}@media (max-width:992px){.sidebar-module--sidebar--2nyyN{top:0;height:100vh;max-width:280px}}@media (max-width:600px){.sidebar-module--sidebar--2nyyN{max-width:300px}.sidebar-module--close--2qQlt{transform:translateX(-300px)}}.contacts-module--contacts--Q1-I8{display:flex;flex-wrap:wrap;justify-content:center;padding:0 16px 8px}.contacts-module--contacts--Q1-I8>a>i{font-size:20px;padding-right:8px}.footer-module--footer--19rwW{color:#555;font-size:12px;line-height:1.5}.footer-module--footer--19rwW>div{text-align:center}.dark .footer-module--footer--19rwW{color:var(--dark-text-color)!important}:root{--primary-color:#51b26d;--background-color:#e0e0e0;--text-color:#555;--accent-background-color:#eee;--accent-text-color:#212121;--divider-color:hsla(0,0%,74.1%,0.5019607843137255);--dark-primary-color:#212121;--dark-accent-color:#9e9e9e;--dark-background-color:#616161;--dark-accent-background-color:#757575;--dark-text-color:#333;--dark-accent-text-color:#eee;--dark-divider-color:rgba(66,66,66,0.2196078431372549);--post-info-text-color:#555;--post-title-color:#444;--dark-post-info-text-color:#333;--dark-post-title-color:#212121}body{background-color:var(--background-color);overflow-x:hidden}body ::-webkit-scrollbar{width:5px;height:5px;background:rgba(142,83,83,0)}body ::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)}.global-transition div,body{transition:all .4s cubic-bezier(.645,.045,.355,1) 0s}body[class^=dark]{background-color:var(--dark-background-color)!important}.body-locked{overflow:hidden}.divider{display:table;vertical-align:middle;position:relative;margin-bottom:6px;height:1px;width:100%;background-color:var(--divider-color)}.dark .divider{background-color:var(--dark-divider-color)}.dark a:focus,.dark a:hover{text-decoration:underline!important;color:#999!important}.lazyload,.lazyloading{height:auto;width:auto;opacity:1;background-color:#9e9e9e}.lazyloaded{height:auto;width:auto;opacity:1;transition:opacity .3s}.medium-zoom-overlay{z-index:1002}.medium-zoom-image--opened{z-index:1003}.post-body{color:#555;margin:20px;padding-bottom:20px;line-height:2}.post-body h2,.post-body h3,.post-body h4,.post-body h5,.post-body h6{border-left:4px solid #51b26d;margin-bottom:10px;margin-left:0;padding-left:32px;border-bottom:none}.post-body p{margin:0 0 20px;word-break:normal;word-wrap:break-word}.post-body img{margin:1%;min-width:50px;max-width:65%;height:auto}@media(max-width:900px){.post-body img{max-width:100%}}.post-body a{color:#2196f3!important;text-decoration:none;word-break:break-all}.post-body a:active,a:focus,a:hover{text-decoration:underline!important;color:#51b26d!important}.post-body blockquote{color:#2e405b;border-left:4px solid #1098ad;background-color:#e3f2fd;margin:0 0 20px;border-radius:3px;padding:0 0 0 10px}.post-body pre{margin:1% auto 20px}.post-body pre code{padding:1%;display:block;overflow:auto;background-color:#2b2b2b}.post-body .code-line>code>span{display:inline}.post-body hr{background-color:#555;height:1px;border:none}.post-body table{border-collapse:collapse;border-spacing:0;font-size:.875em;margin:0 0 20px;width:100%}.post-body tbody tr:nth-of-type(odd){background:#f9f9f9}.post-body tbody tr:hover{background-color:#999!important}.post-body th,td{font-weight:400;padding:8px;text-align:left;vertical-align:middle;border:1px solid #777}.dark .post-body{color:#333!important}.dark .post-body a{color:#222!important}.dark .post-body a:active,.dark .post-body a:focus,.dark .post-body a:hover{text-decoration:underline!important;color:#111!important}.dark .post-body h2,.dark .post-body h3,.dark .post-body h4,.dark .post-body h5,.dark .post-body h6{border-left:4px solid #111!important}.dark blockquote{color:#bdbdbd;border-left:4px solid #616161!important;background-color:rgba(227,242,253,.17254901960784313)}.dark .post-body hr{background-color:#555}.dark .post-body tbody tr:nth-of-type(odd){background:#555}.dark .post-body tbody tr:hover{background-color:hsla(0,0%,60%,.5)!important}.dark .post-body th,td{border:1px solid #999}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.yoshino-icon{display:inline-block;line-height:1}.yoshino-icon>*{padding:0;margin:0;border:0;display:block;vertical-align:middle}.yoshino-icon svg{width:1em;height:1em;fill:currentColor;vertical-align:-.15em}.yoshino-menu.yoshino-menu-vertical .yoshino-menu-item:after{transition:all .3s cubic-bezier(.645,.045,.355,1);position:absolute;right:-1px;top:50%;content:"";display:inline-block;height:0;width:0}.yoshino-menu.yoshino-menu-vertical .yoshino-menu-item-active{background:#eef7f0}.yoshino-menu.yoshino-menu-vertical .yoshino-menu-item-active:after{top:0;height:100%;width:3px;background:#51b26d}.yoshino-menu.yoshino-menu-horizontal{border-right:none}.yoshino-menu.yoshino-menu-horizontal .yoshino-sub-menu,.yoshino-menu.yoshino-menu-horizontal>.yoshino-menu-item{display:inline-block}.yoshino-menu.yoshino-menu-horizontal .yoshino-menu-item,.yoshino-menu.yoshino-menu-horizontal .yoshino-sub-menu-title{padding:0 20px}.yoshino-menu.yoshino-menu-horizontal .yoshino-menu-item:after{transition:all .3s cubic-bezier(.645,.045,.355,1);position:absolute;bottom:-1px;left:50%;content:"";display:inline-block;height:0;width:0}.yoshino-menu.yoshino-menu-horizontal .yoshino-menu-item-active:after{left:0;width:100%;height:3px;background:#51b26d}.yoshino-sub-menu-pop-list{background:#fff;border-radius:4px;box-shadow:0 2px 8px rgba(0,0,0,.15);margin-top:1px}.yoshino-sub-menu-pop-list .yoshino-menu-item,.yoshino-sub-menu-pop-list .yoshino-menu-item-group-title,.yoshino-sub-menu-pop-list .yoshino-sub-menu-title{padding:0 16px}.yoshino-sub-menu-pop-list .yoshino-menu-item-group .yoshino-sub-menu-title,.yoshino-sub-menu-pop-list .yoshino-menu-item-group>.yoshino-menu-item{padding-left:0 16px 0 28px}.yoshino-sub-menu-pop-list .yoshino-sub-menu{position:relative}.yoshino-sub-menu-pop-list .yoshino-sub-menu-title{position:relative;overflow:visible}.yoshino-sub-menu-pop-list .yoshino-sub-menu-container{overflow:visible}.yoshino-sub-menu-pop-list .yoshino-sub-menu-child-menu-container{position:absolute;left:100%;top:0;padding-left:10px}.yoshino-sub-menu-pop-list .yoshino-sub-menu-child-menu{background:#fff;border-radius:4px;box-shadow:0 2px 8px rgba(0,0,0,.15)}.yoshino-sub-menu-pop-list .yoshino-menu-item-active{background:#eef7f0}.yoshino-menu{border-right:1px solid #e8e8e8}.yoshino-sub-menu *{transition:all .3s cubic-bezier(.645,.045,.355,1)}.yoshino-sub-menu-title{font-size:14px;height:40px;line-height:40px;cursor:pointer;margin:4px 0;position:relative;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:40px}.yoshino-sub-menu-title:hover{color:#51b26d}.yoshino-sub-menu-disabled .yoshino-sub-menu-title{cursor:not-allowed;color:#b8b8b8}.yoshino-sub-menu-disabled .yoshino-sub-menu-title:hover{color:#b8b8b8}.yoshino-sub-menu-container{overflow:hidden}.yoshino-sub-menu-icon{font-size:14px}.yoshino-sub-menu-hidden .yoshino-sub-menu-icon{transform:translateY(-50%) rotate(180deg)}.yoshino-sub-menu-icon{position:absolute;right:15px;top:50%;transform:translateY(-50%);font-size:12px}.yoshino-sub-menu:first-child .yoshino-sub-menu-title{margin-top:0}.yoshino-menu-item-group-title{font-size:14px;height:40px;line-height:40px;color:#b8b8b8;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.yoshino-menu-item-group:first-child{margin-top:0}.yoshino-menu-item{font-size:14px;height:40px;line-height:40px;cursor:pointer;margin:4px 0;transition:all .3s cubic-bezier(.645,.045,.355,1);position:relative;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.yoshino-menu-item:hover:not(.yoshino-menu-item-disabled){color:#51b26d}.yoshino-menu-item-disabled{color:#b8b8b8;cursor:not-allowed}.yoshino-menu-item-active{color:#51b26d}.yoshino-menu-item:first-child{margin-top:0}@keyframes rotate{0%{transform-origin:50% 50%;transform:rotate(0)}to{transform-origin:50% 50%;transform:rotate(1turn)}}.yoshino-button{display:inline-block;border-radius:4px;cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none;outline:0;padding:0 15px;font-size:14px;height:32px;transition:all .3s cubic-bezier(.645,.045,.355,1);background-color:#fff;border:1px solid #d9d9d9}.yoshino-button:disabled{background-color:#f7f7f7;cursor:not-allowed;color:#d9d9d9}.yoshino-button:disabled:focus,.yoshino-button:disabled:hover{border-color:#d9d9d9;color:#d9d9d9}.yoshino-button:focus,.yoshino-button:hover{border-color:#51b26d;color:#51b26d}.yoshino-button:active{color:#418e57}.yoshino-button-primary{color:#fff;background-color:#51b26d;border-color:#51b26d}.yoshino-button-primary:focus,.yoshino-button-primary:hover{background-color:#62ba7c;color:#fff}.yoshino-button-primary:active{background-color:#418e57}.yoshino-button-dashed{color:#51b26d;border-style:dashed}.yoshino-button-danger{background-color:#f7f7f7;color:#f04134}.yoshino-button-danger:focus,.yoshino-button-danger:hover{background-color:#f04134;border-color:#f04134;color:#fff}.yoshino-button-danger:active{background-color:#d73435;border-color:#d73435}.yoshino-button-size-small{padding:0 7px;font-size:12px;border-radius:4px;height:24px}.yoshino-button-size-large{padding:0 15px;font-size:14px;height:40px}.yoshino-button-ghost{color:#fff}.yoshino-button-ghost,.yoshino-button-ghost:focus,.yoshino-button-ghost:hover{background-color:transparent}.yoshino-button-ghost.yoshino-button-primary{color:#51b26d}.yoshino-button-ghost.yoshino-button-danger{color:#f04134;border-color:#f04134}.yoshino-button-ghost.yoshino-button-danger:active{color:#d73435;border-color:#d73435}.yoshino-button-icon{display:flex;align-items:center;justify-content:center}.yoshino-button-icon i{display:block}.yoshino-button-shape-circle{border-radius:28px;width:28px;height:28px;padding:0;font-size:14px}.yoshino-button-load{animation:rotate 1s linear infinite}.yoshino-button-container{display:flex;justify-content:center;align-content:center}.yoshino-pop{position:absolute;outline:0}.yoshino-pop :focus{outline:0}.yoshino-tooltip{position:relative;transition:opacity .3s cubic-bezier(.645,.045,.355,1)}.yoshino-tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.yoshino-tooltip-content{padding:5px;background:rgba(0,0,0,.75);font-size:12px;color:#fff;border-radius:4px;position:relative;white-space:nowrap}.yoshino-tooltip-top .yoshino-tooltip-arrow,.yoshino-tooltip-topLeft .yoshino-tooltip-arrow,.yoshino-tooltip-topRight .yoshino-tooltip-arrow{bottom:3px;border-width:5px 5px 0;border-top-color:rgba(0,0,0,.75)}.yoshino-tooltip-top .yoshino-tooltip-content,.yoshino-tooltip-topLeft .yoshino-tooltip-content,.yoshino-tooltip-topRight .yoshino-tooltip-content{top:-8px}.yoshino-tooltip-bottomLeft>.yoshino-tooltip-arrow,.yoshino-tooltip-topLeft>.yoshino-tooltip-arrow{left:8px}.yoshino-tooltip-bottom>.yoshino-tooltip-arrow,.yoshino-tooltip-top>.yoshino-tooltip-arrow{left:50%;transform:translate(-50%)}.yoshino-tooltip-bottomRight>.yoshino-tooltip-arrow,.yoshino-tooltip-topRight>.yoshino-tooltip-arrow{right:8px}.yoshino-tooltip-bottom .yoshino-tooltip-arrow,.yoshino-tooltip-bottomLeft .yoshino-tooltip-arrow,.yoshino-tooltip-bottomRight .yoshino-tooltip-arrow{top:3px;border-width:0 5px 5px;border-bottom-color:rgba(0,0,0,.75)}.yoshino-tooltip-bottom .yoshino-tooltip-content,.yoshino-tooltip-bottomLeft .yoshino-tooltip-content,.yoshino-tooltip-bottomRight .yoshino-tooltip-content{bottom:-8px}.yoshino-tooltip-left .yoshino-tooltip-arrow,.yoshino-tooltip-leftBottom .yoshino-tooltip-arrow,.yoshino-tooltip-leftTop .yoshino-tooltip-arrow{right:3px;border-width:5px 0 5px 5px;border-left-color:rgba(0,0,0,.75)}.yoshino-tooltip-left .yoshino-tooltip-content,.yoshino-tooltip-leftBottom .yoshino-tooltip-content,.yoshino-tooltip-leftTop .yoshino-tooltip-content{left:-8px}.yoshino-tooltip-left>.yoshino-tooltip-arrow,.yoshino-tooltip-right>.yoshino-tooltip-arrow{top:50%;transform:translateY(-50%)}.yoshino-tooltip-leftTop>.yoshino-tooltip-arrow,.yoshino-tooltip-rightTop>.yoshino-tooltip-arrow{top:8px}.yoshino-tooltip-leftBottom>.yoshino-tooltip-arrow,.yoshino-tooltip-rightBottom>.yoshino-tooltip-arrow{bottom:8px}.yoshino-tooltip-right .yoshino-tooltip-arrow,.yoshino-tooltip-rightBottom .yoshino-tooltip-arrow,.yoshino-tooltip-rightTop .yoshino-tooltip-arrow{left:3px;border-width:5px 5px 5px 0;border-right-color:rgba(0,0,0,.75)}.yoshino-tooltip-right .yoshino-tooltip-content,.yoshino-tooltip-rightBottom .yoshino-tooltip-content,.yoshino-tooltip-rightTop .yoshino-tooltip-content{right:-8px}.yoshino-tooltip-appear{display:block;opacity:0;transform:scale(.8)}.yoshino-tooltip-active-appear{display:block;transform:scale(1)}.yoshino-tooltip-active-enter,.yoshino-tooltip-enter{display:block;transform:scale(.8)}.yoshino-tooltip-done-enter,.yoshino-tooltip-exit{display:block;transform:scale(1)}.yoshino-tooltip-active-exit{display:block;transform:scale(.8)}.yoshino-tooltip-done-exit{display:none;transform:scale(.8)}.yoshino-pagination{-webkit-user-select:none;-ms-user-select:none;user-select:none}.yoshino-pagination-item{display:inline-block;min-width:32px;height:32px;line-height:32px;border:1px solid #d9d9d9;border-radius:4px;margin-right:8px;text-align:center;font-size:14px;cursor:pointer}.yoshino-pagination-item-active,.yoshino-pagination-item:hover{border-color:#51b26d;color:#51b26d}.yoshino-pagination-item-more{border:none}.yoshino-pagination-item:last-child{margin-right:0}.yoshino-pagination-footer,.yoshino-pagination-header{padding:0 5px}*,:after,:before{box-sizing:border-box;margin:0;padding:0}body{font-family:Monospaced Number,Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif}iframe,img,input,select,textarea{border:0;outline:0}input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}button:focus,input:focus,select:focus,textarea:focus{outline:0}a,a:active,a:hover,a:link,a:visited{text-decoration:none;color:inherit}::-ms-clear{display:none}::-webkit-search-cancel-button,::-webkit-search-decoration,::-webkit-search-results-button,::-webkit-search-results-decoration{display:none}li,ul{list-style:none}.yoshino-menu{border-right:0!important}.dark .yoshino-menu.yoshino-menu-vertical .yoshino-menu-item-active{--dark-accent-color:hsla(0,0%,62%,0.5019607843137255);background:var(--dark-accent-color)!important}.dark .yoshino-menu.yoshino-menu-vertical .yoshino-menu-item-active:after{background:#cfbbbb!important}.dark .yoshino-menu-item-active,.dark .yoshino-menu-item:hover:not(.yoshino-menu-item-disabled){color:var(--dark-accent-text-color)!important}.dark .yoshino-pagination-item-active,.dark .yoshino-pagination-item:hover{border-color:#222;color:#222}.post-module--post-card--AAnsR{margin:25px;width:100%;max-width:1200px}.post-module--post--34YDX{position:relative}.post-module--comment--2LekW,.post-module--post--34YDX{box-shadow:0 2px 8px rgba(0,0,0,.15);background-color:var(--accent-background-color)}.post-module--comment--2LekW{padding:10px}.dark .post-module--comment--2LekW,.dark .post-module--post--34YDX{background-color:var(--dark-accent-background-color)!important}.archives-module--archives-card--2Z37N{width:100%;margin:25px;padding:8px;max-width:1200px;box-shadow:0 2px 8px rgba(0,0,0,.15);background-color:var(--accent-background-color)}.archives-module--archives-card--2Z37N>h1{margin-bottom:8px;color:var(--accent-text-color)}.archives-module--archives-list--AKc4Y ul{padding-left:8px}.archives-module--archives-list--AKc4Y>ul>li li{padding:4px;list-style:disc;margin-left:32px;border-bottom:1px dashed #ccc}.archives-module--archives-list--AKc4Y time{margin-right:8px}.dark .archives-module--archives-card--2Z37N{background-color:var(--dark-accent-background-color)!important}.dark .archives-module--archives-list--AKc4Y>ul>li li{border-bottom:1px dashed #999}.link-module--link-card--36edS{width:100%;margin:25px;padding:8px;max-width:1200px;box-shadow:0 2px 8px rgba(0,0,0,.15);background-color:var(--accent-background-color)}.link-module--link-card--36edS>h1{margin-bottom:8px;color:var(--accent-text-color)}.link-module--link-list--3LT-r{margin:25px;display:flex;flex-wrap:wrap}.link-module--link-item--bAliS{width:12.5%;height:150px;text-align:center;margin:0 0 30px}.link-module--link-item--bAliS img{width:100px;height:100px}.link-module--link-item--bAliS h4{color:var(--text-color)}.link-module--link-item--bAliS p{color:#666;font-size:12px}.dark .link-module--link-card--36edS{background-color:var(--dark-accent-background-color)!important}.dark .link-module--link-item--bAliS h4{color:var(--dark-text-color)!important}.dark .link-module--link-item--bAliS p{color:#444}@media(min-width:0px){.link-module--link-item--bAliS{width:100%}}@media(min-width:350px){.link-module--link-item--bAliS{width:50%}}@media(min-width:600px){.link-module--link-item--bAliS{width:25%}}@media(min-width:1000px){.link-module--link-item--bAliS{width:12.5%}}.index-module--index--37LS8{width:100%;margin:24px;max-width:1200px}.index-module--pagination--2V1v2{margin-bottom:30px;text-align:center}.index-module--tag-name--nkpb0{margin:24px;font-size:30px;display:block}.postHead-module--title--2tgEC{padding:8px;font-size:25px;font-weight:700;text-align:center;color:var(--post-title-color)}.dark .postHead-module--title--2tgEC{color:var(--dark-post-title-color)!important}.postInfo-module--post-info--3v5BP{font-size:12px;text-align:center;color:var(--post-info-text-color)}.postInfo-module--post-info--3v5BP>span{margin:0 4px}.dark .postInfo-module--post-info--3v5BP{color:var(--dark-post-info-text-color)!important}.postInfo-module--post-info--3v5BP>span>i{font-size:16px;color:var(--primary-color)}.dark .postInfo-module--post-info--3v5BP>span>i{color:var(--dark-primary-color)!important}.postItem-module--post-item--2QpdO{width:100%;margin-bottom:40px;box-shadow:0 2px 8px rgba(0,0,0,.15);background-color:var(--accent-background-color)}.postItem-module--more-button--1mvIw{text-align:center;padding-bottom:16px}.postItem-module--more-button--1mvIw>button{color:#fff;border-color:#2196f3!important;background-color:#2196f3!important}.dark .postItem-module--more-button--1mvIw>button{color:#fff;border-color:#222!important;background-color:#222!important}.dark .postItem-module--post-item--2QpdO{background-color:var(--dark-accent-background-color)!important}.toc-wrap ol{margin:0;padding:0 2px 5px 10px;font-size:13px;list-style:none;overflow-x:hidden;overflow-y:auto;text-align:left}.toc-wrap ol>ol{padding-left:0}.toc-wrap ol a{text-decoration:none;color:#0593d3;border-bottom-color:#ccc;transition-property:all;transition-delay:0s;transition-duration:.2s;transition-timing-function:ease-in-out}.toc-wrap .nav-item{line-height:1.8;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.toc-wrap .nav .active>a{border-bottom-color:#51b26d;color:#51b26d}.toc-wrap .nav .active-current>a,.toc-wrap .nav .active-current>a:hover{color:#51b26d}.toc-wrap .nav .nav-child{display:none}.toc-wrap .nav .active-current>.nav-child,.toc-wrap .nav .active-current>.nav-child>.nav-item,.toc-wrap .nav .active>.nav-child{display:block}.dark .toc-wrap ol a{color:#999!important}.dark .toc-wrap .nav .active>a{border-bottom-color:#444!important;color:#333!important}.dark .toc-wrap .nav .active-current>a,.dark .toc-wrap .nav .active-current>a:hover{color:#333!important}.drag-module--drag--2rkNg{position:fixed;top:200px;z-index:1001;right:calc(10vw - 100px);width:100%;max-width:360px;background-color:var(--background-color);box-shadow:0 0 10px rgba(0,0,0,.3);border-radius:4px;transition:background-color .4s cubic-bezier(.645,.045,.355,1) 0s!important}.drag-module--title--1ckBs{width:100%;height:auto;margin-bottom:6px;cursor:move}.dark .drag-module--drag--2rkNg{background-color:var(--dark-background-color)!important}@media (max-width:992px){.drag-module--drag--2rkNg{display:none}}@media (min-width:1440px){.drag-module--drag--2rkNg{right:calc(20vw - 100px)}}@media (min-width:1920px){.drag-module--drag--2rkNg{right:calc(30vw - 100px)}}</style><meta name="generator" content="Gatsby 3.4.0"/><title data-react-helmet="true">[php]实现b站登录 | Nworm</title><meta data-react-helmet="true" name="description" content="https://blog.kaaass.net/archives/947 在网上无聊瞎逛时，找到了这位大佬的文章
里面给出了ak，sk ，万分感激"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:description" content="https://blog.kaaass.net/archives/947 在网上无聊瞎逛时，找到了这位大佬的文章
里面给出了ak，sk ，万分感激"/><link rel="sitemap" type="application/xml" href="/sitemap.xml/sitemap-index.xml"/><link rel="alternate" type="application/rss+xml" title="Nworm" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-f272543dd3fbb047bee1.js"/><link as="script" rel="preload" href="/framework-8dcaa89ad56a07169b97.js"/><link as="script" rel="preload" href="/app-a5e958c9f675828ff14f.js"/><link as="script" rel="preload" href="/e8cd86f8f80aa61ba39f4e3852b3c68c8d3a692a-c9d797aee625080cb59d.js"/><link as="script" rel="preload" href="/component---node-modules-gatsby-theme-yoshino-src-templates-post-jsx-d071edd100249978b228.js"/><link as="fetch" rel="preload" href="/page-data/post/php-shixianbzhan/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1528757306.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3042919606.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3159585216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3741834850.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4209591199.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/847439237.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-transition"><header class="toolbar-module--toolbar--1GBl7 toolbar-module--toolbar-shadow--2zjJP"><i class="icon-module--icon--2wDQu toolbar-module--icon--3lesc" style="float:left"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></i><span class="toolbar-module--title--3e0YB">Nworm</span><i class="icon-module--icon--2wDQu toolbar-module--icon--3lesc" style="float:right"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18V6a6 6 0 010 12z"/></svg></i></header><div class="sidebar-module--sidebar--2nyyN sidebar-module--sidebar-shadow--1vEHZ sidebar-module--close--2qQlt" style="max-height:"><div></div><div style="min-height:calc(100% - 126px)"><div><div style="margin:16px"><div class="authorCard-module--avatar--1s-zn authorCard-module--text-center--1lvKW"><img class="authorCard-module--avatar-circle--2ne8N" src="//img.nworm.icu/avatar.jpg" width="100" height="100"/></div><div class="authorCard-module--text-center--1lvKW authorCard-module--name--2KPL8">nworm<br/><span class="authorCard-module--description--2LRcT"> <!-- -->一条咸鱼<!-- --> </span></div></div></div><div class="divider"></div><ul class="yoshino-menu yoshino-menu-vertical"><li class="yoshino-menu-item yoshino-menu-item-active" style="padding-left:24px;overflow:visible">主页</li><li class="yoshino-menu-item" style="padding-left:24px;overflow:visible">归档</li><li class="yoshino-menu-item" style="padding-left:24px;overflow:visible">关于</li><li class="yoshino-menu-item" style="padding-left:24px;overflow:visible">朋友</li></ul></div><div class="contacts-module--contacts--Q1-I8"><a href="https://github.com/1574242600" target="_blank" rel="noreferrer"><i class="icon-module--icon--2wDQu"><svg aria-hidden="true" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0a8 8 0 00-2.53 15.59c.4.07.55-.17.55-.38l-.01-1.49c-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.42 7.42 0 014 0c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48l-.01 2.2c0 .21.15.46.55.38A8.01 8.01 0 0016 8a8 8 0 00-8-8z"/></svg></i></a><a href="https://t.me/nworm1574" target="_blank" rel="noreferrer"><i class="icon-module--icon--2wDQu"><svg viewBox="0 0 300 300"><path d="M5.3 144.65l69.13 25.8 26.75 86.04a8.14 8.14 0 0012.93 3.9l38.53-31.42a11.5 11.5 0 0114.01-.39l69.5 50.46a8.15 8.15 0 0012.76-4.93l50.91-244.89a8.15 8.15 0 00-10.9-9.26L5.21 129.4c-7 2.7-6.94 12.61.08 15.25zm91.57 12.06l135.1-83.2c2.43-1.5 4.92 1.79 2.84 3.72L123.3 180.87a23.11 23.11 0 00-7.16 13.83l-3.8 28.15c-.5 3.75-5.78 4.13-6.82.49L90.93 172a13.6 13.6 0 015.94-15.3z"/></svg></i></a><a href="tencent://message/?uin=1574242600&amp;Site=&amp;Menu=yes" target="_blank" rel="noreferrer"><i class="icon-module--icon--2wDQu"><svg viewBox="0 0 31.62 31.62"><path d="M25.7 13.18a10.3 10.3 0 10-19.77 0C4.63 14.22-.4 18.74 1.67 24.6c0 0 1.75-.15 3.19-2.8.43 1.7 1.25 3.24 2.36 4.54-1.63.48-2.73 1.4-2.73 2.47 0 1.56 2.35 2.82 5.24 2.82 1.97 0 3.68-.59 4.57-1.44a11.47 11.47 0 003.01 0c.9.85 2.61 1.44 4.58 1.44 2.9 0 5.24-1.27 5.24-2.82 0-1.06-1.1-2-2.73-2.47 1.1-1.3 1.93-2.84 2.36-4.55 1.44 2.66 3.19 2.81 3.19 2.81 2.07-5.85-2.96-10.37-4.26-11.4z"/></svg></i></a></div><div class="divider"></div><footer class="footer-module--footer--19rwW"><div><span>博客已存活: </span>679天23小时46分43秒</div><div>© <!-- -->2021<!-- --> <!-- -->Nworm<!-- -->. <!-- -->Powered by<!-- --> <a href="//www.gatsbyjs.com/" target="_blank" rel="noreferrer">gatsby</a></div><div>Theme by  <a href="//github.com/1574242600/gatsby-theme-yoshino" target="_blank" rel="noreferrer">yoshino</a></div><div><span>Made with by <!-- -->nworm<!-- -->.</span> <span><a href="https://nworm.icu/sitemap.xml">sitemap</a></span> <span><a href="https://nworm.icu/rss.xml">rss</a></span></div></footer></div><div><div class="views"><div class="layout-module--pages--16eZ4" location="[object Object]"><div class="post-module--post-card--AAnsR"><div class="post-module--post--34YDX"><div><h2 class="postHead-module--title--2tgEC">[php]实现b站登录</h2><div class="postInfo-module--post-info--3v5BP"><span><i class="icon-module--icon--2wDQu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M19 3h-1V1h-2v2H8V1H6v2H5a2 2 0 00-1.99 2L3 19a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg></i> 发表于 <time dateTime="2019-12-25T20:00:00.000Z" itemProp="dateCreated datePublished">2019-12-25</time></span>|<span>预计阅读时长: 5 分钟</span>|<span>标签: <!-- --> <a href="/tag/php">php</a></span></div></div><div class="post-body"><blockquote>
<p><a href="https://blog.kaaass.net/archives/947">https://blog.kaaass.net/archives/947</a></p>
</blockquote>
<hr>
<p>在网上无聊瞎逛时，找到了这位大佬的文章
里面给出了ak，sk ，万分感激 </p>
<!--more-->
<pre><code>Device: android
Description: 普通版
AppKey: 1d8b6e7d45233436
SecretKey: 560c52ccd288fed045859ed18bffd973

Device: android_i
Description: 国际版
AppKey: bb3101000e232e27
SecretKey: 36efcfed79309338ced0380abd824ac1

Device: android_b
Description: 概念版
AppKey: 07da50c9a0bf829f
SecretKey: 25bdede4e1581c836cab73a48790ca6e

Device: android_tv
Description: 电视版
AppKey: 4409e2ce8ffd12b8
SecretKey: 59b43e04ad6965f34319062b478f83dd

Device: biliLink
Description: 直播
AppKey: 37207f2beaebf8d7
SecretKey: e988e794d4d4b6dd43bc0e89d6e90c43
</code></pre>
<p>（之前因为没ak，sk放弃了）
那该死的小破站，居然还没有公开OAuth2 （<a href="https://passport.bilibili.com/register/third.html">https://passport.bilibili.com/register/third.html</a>）
那就只好用安卓客户端的api来玩了</p>
<p><img class="lazyload" data-src="https://i.loli.net/2019/12/25/9IkbpyWfH3ZaxQh.png" alt="9IkbpyWfH3ZaxQh.png">
<img class="lazyload" data-src="https://i.loli.net/2019/12/25/WIRCULzbswK2rZv.png" alt="0OO07OWUEO{I_OU1L{VXQ2B.png"></p>
<p>分别请求了
<a href="https://passport.bilibili.com/api/oauth2/getKey">https://passport.bilibili.com/api/oauth2/getKey</a> 用于获取加密明文密码用的hash，公钥
<a href="https://passport.bilibili.com/api/v2/oauth2/login">https://passport.bilibili.com/api/v2/oauth2/login</a> 用于简单的获取用户的登录凭据（access_key、Cookie）
下面看请求参数
<img class="lazyload" data-src="https://i.loli.net/2019/12/25/sInQoOAdxNuVt6W.png" alt="JG)6MR77DWE@769{~AB1~YH.png"></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>appkey</td>
<td>key</td>
</tr>
<tr>
<td>build</td>
<td>不知道</td>
</tr>
<tr>
<td>mobi_app</td>
<td>不知道</td>
</tr>
<tr>
<td>platform</td>
<td>不知道</td>
</tr>
<tr>
<td>ts</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>签名</td>
</tr>
</tbody></table>
<p>除了sign，没什么好讲的，第二个请求就多了两个参数 username ，password（重要）</p>

              <h3 id="返回示例">
                返回示例
              </h3><p><a href="https://passport.bilibili.com/api/oauth2/getKey">https://passport.bilibili.com/api/oauth2/getKey</a></p>
<pre><code class="language-json"><span class="token punctuation">{</span><span class="token property">"ts"</span><span class="token operator">:</span><span class="token number">1577273591</span><span class="token punctuation">,</span>   <span class="token comment">// 当前UNIX时间戳</span>
 <span class="token property">"code"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>          <span class="token comment">//状态码</span>
 <span class="token property">"data"</span><span class="token operator">:</span><span class="token punctuation">{</span>
 <span class="token property">"hash"</span><span class="token operator">:</span><span class="token string">"56e15708534f5973"</span><span class="token punctuation">,</span> <span class="token comment">//哈希</span>
 <span class="token property">"key"</span><span class="token operator">:</span>"-----BEGIN PUBLIC KEY-----
 \nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDjb4V7EidX/ym28t2ybo0U6t0n\n6p4ej8VjqKHg100va6jkNbNTrLQqMCQCAYtXM
 XXp2Fwkk6WR+12N9zknLjf+C9sx\n/+l48mjUU8RqahiFD1XT/u2e0m2EN029OhCgkHx3Fc/KlFSIbak93EH/XlYis0w+\nXl69GV6klz
 gxW6d2xQIDAQAB\n-----END PUBLIC KEY-----\n"   <span class="token comment">//公钥</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre>
<p><a href="https://passport.bilibili.com/api/v2/oauth2/login">https://passport.bilibili.com/api/v2/oauth2/login</a></p>
<pre><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"ts"</span><span class="token operator">:</span> <span class="token number">1577278563</span><span class="token punctuation">,</span> <span class="token comment">// 当前UNIX时间戳</span>
    <span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token comment">// 状态码</span>
    <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"status"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">"token_info"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"mid"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 该用户的mid</span>
            <span class="token property">"access_token"</span><span class="token operator">:</span> <span class="token string">"1234567890abcde1234567890abc"</span><span class="token punctuation">,</span> <span class="token comment">// 该用户的access_key</span>
            <span class="token property">"refresh_token"</span><span class="token operator">:</span> <span class="token string">"1234567890abcde1234567890abc"</span><span class="token punctuation">,</span> <span class="token comment">// 该用户的refresh_token</span>
            <span class="token property">"expires_in"</span><span class="token operator">:</span> <span class="token number">2592000</span>             <span class="token comment">// 过期时间戳</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"cookie_info"</span><span class="token operator">:</span> <span class="token punctuation">{</span>     <span class="token comment">// 该用户Cookie凭据</span>
            <span class="token property">"cookies"</span><span class="token operator">:</span> <span class="token punctuation">[</span>.....<span class="token punctuation">]</span><span class="token punctuation">,</span> 
            <span class="token property">"domains"</span><span class="token operator">:</span> <span class="token punctuation">[</span>.....<span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"sso"</span><span class="token operator">:</span> <span class="token punctuation">[</span>.....<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

              <h3 id="签名sign生成方式：">
                签名(sign)生成方式：
              </h3><blockquote>
<p>把接口所需所有参数拼接，如utk=xx&amp;time=xx，按参数名称排序，最后再拼接上密钥App-Secret，做md5加密 (callback不需要参与sign校检)           ------<a href="https://github.com/fython/BilibiliAPIDocs">https://github.com/fython/BilibiliAPIDocs</a></p>
</blockquote>
<p>PHP 版本:</p>
<pre><code class="language-php"><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token parameter">$params</span> array 参数列表
 * <span class="token keyword">@param</span> <span class="token parameter">$key</span> 加密密钥
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token keyword">array</span></span> sign:加密校验串,params:参数拼接串
 */</span>
 <span class="token keyword">function</span> <span class="token function">get_sign</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token variable">$_data</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">ksort</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">reset</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$params</span> <span class="token keyword">as</span> <span class="token variable">$k</span> <span class="token operator">=></span> <span class="token variable">$v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// rawurlencode 返回的转义数字必须为大写( 如%2F )</span>
  <span class="token variable">$_data</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$k</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'='</span> <span class="token operator">.</span> <span class="token function">rawurlencode</span><span class="token punctuation">(</span><span class="token variable">$v</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token variable">$_sign</span> <span class="token operator">=</span> <span class="token function">implode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'&amp;'</span><span class="token punctuation">,</span> <span class="token variable">$_data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
    <span class="token string single-quoted-string">'sign'</span> <span class="token operator">=></span> <span class="token function">strtolower</span><span class="token punctuation">(</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$_sign</span> <span class="token operator">.</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'params'</span> <span class="token operator">=></span> <span class="token variable">$_sign</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token function">define</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"APP_SECRET"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"abcdef123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">get_sign</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"type"</span><span class="token operator">=></span><span class="token string double-quoted-string">"json"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">APP_SECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>js版本:</p>
<pre><code class="language-js"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"http://static.hdslb.com/js/md5.js"</span><span class="token operator">></span><span class="token operator">/</span>script<span class="token operator">></span>
 <span class="token keyword">function</span> <span class="token function">get_sign</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
     <span class="token keyword">var</span> s_keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> params<span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         s_keys<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     s_keys<span class="token punctuation">.</span><span class="token method function property-access">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
     <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s_keys<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token comment">// encodeURIComponent 返回的转义数字必须为大写( 如 %2F )</span>
         data<span class="token operator">+=</span><span class="token punctuation">(</span>data <span class="token operator">?</span> <span class="token string">"&amp;"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token operator">+</span>s_keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"="</span><span class="token operator">+</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span>s_keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
         <span class="token string">"sign"</span><span class="token operator">:</span><span class="token function">hex_md5</span><span class="token punctuation">(</span>data<span class="token operator">+</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token string">"params"</span><span class="token operator">:</span>data
     <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>

              <h3 id="password-生成方式">
                password 生成方式
              </h3><p>在明文密码前拼接从<a href="https://passport.bilibili.com/api/oauth2/getKey%E5%BE%97%E6%9D%A5%E7%9A%84hash%EF%BC%8C%E7%94%A8%E5%BE%97%E6%9D%A5%E7%9A%84%E5%85%AC%E9%92%A5%E5%81%9Arsa%E5%8A%A0%E5%AF%86%E5%86%8Dbase64">https://passport.bilibili.com/api/oauth2/getKey得来的hash，用得来的公钥做rsa加密再base64</a>  </p>
<pre><code class="language-php"><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token parameter">$key</span> 加密公钥
 * <span class="token keyword">@param</span> <span class="token parameter">$hash</span> string 哈希
 * <span class="token keyword">@param</span> <span class="token parameter">$pwd</span> string 明文密码
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token keyword">string</span></span> base64后的加密密码
 */</span>

<span class="token keyword">function</span> <span class="token function">get_rsa_pwd</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span><span class="token variable">$hash</span><span class="token punctuation">,</span><span class="token variable">$pwd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$pu_key</span> <span class="token operator">=</span> <span class="token function">openssl_pkey_get_public</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$loginkey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">openssl_public_encrypt</span><span class="token punctuation">(</span><span class="token variable">$hash</span> <span class="token operator">.</span> <span class="token variable">$pwd</span> <span class="token punctuation">,</span><span class="token variable">$rsa_pwd</span><span class="token punctuation">,</span><span class="token variable">$pu_key</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">base64_encode</span><span class="token punctuation">(</span><span class="token variable">$rsa_pwd</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token constant boolean">false</span> <span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre>
<p>这些都知道了，你还写不出来登录？？</p>

              <h3 id="demo">
                demo
              </h3><pre><code>https://nworm.cf/my/bili/login.php?user=a&amp;pwd=b
参数都懂吧
我不会记录账号密码，也没有必要
不相信我的，请使用小号
</code></pre>

              <h3 id="源码">
                源码
              </h3><p><a href="https://github.com/1574242600/bili-login">https://github.com/1574242600/bili-login</a>
我没写判断</p>

              <h3 id="关于验证码的问题">
                关于验证码的问题
              </h3><p>关于验证码的问题
<a href="https://passport.bilibili.com/captcha">https://passport.bilibili.com/captcha</a>
在请求b站登录api（或demo，不过demo的sid的值请自行解析，我懒）时，它会返回一个cookies， 名称为sid
带着sid请求上面的链接，得到验证码图片，和名为JSESSIONID的session
最后带着上面的cookies ，再加个请求参数captcha，值就是验证码
就行了</p>

              <h3 id="坑">
                坑
              </h3><pre><code class="language-php"><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$lo</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="language-php"><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$lo</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span><span class="token function">http_build_query</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>区别：<a href="https://www.cnblogs.com/52php/p/5677689.html">https://www.cnblogs.com/52php/p/5677689.html</a>
(会导致b站认为你的请求非法)
这玩意害我蒙了半天
以后我绝对加http_build_query()</p>
</div></div><div class="post-module--comment--2LekW"><div id="disqus_thread"><div> loading...</div></div></div></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/php-shixianbzhan/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-73d6fa2ce4e36c6c5c5f.js"],"app":["/app-a5e958c9f675828ff14f.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-c3c6e29b369bd2f51e84.js"],"component---node-modules-gatsby-theme-yoshino-src-pages-404-jsx":["/component---node-modules-gatsby-theme-yoshino-src-pages-404-jsx-02767214fd5eb6b3613d.js"],"component---node-modules-gatsby-theme-yoshino-src-pages-about-jsx":["/component---node-modules-gatsby-theme-yoshino-src-pages-about-jsx-19bbe8c3d63a5ecf9a1f.js"],"component---node-modules-gatsby-theme-yoshino-src-pages-archives-jsx":["/component---node-modules-gatsby-theme-yoshino-src-pages-archives-jsx-94cbdb421b1c86e9e674.js"],"component---node-modules-gatsby-theme-yoshino-src-pages-link-jsx":["/component---node-modules-gatsby-theme-yoshino-src-pages-link-jsx-1b3c7f796e99b4be85ea.js"],"component---node-modules-gatsby-theme-yoshino-src-templates-index-jsx":["/component---node-modules-gatsby-theme-yoshino-src-templates-index-jsx-66a3779fa1f2461863e8.js"],"component---node-modules-gatsby-theme-yoshino-src-templates-post-jsx":["/component---node-modules-gatsby-theme-yoshino-src-templates-post-jsx-d071edd100249978b228.js"],"component---node-modules-gatsby-theme-yoshino-src-templates-tag-jsx":["/component---node-modules-gatsby-theme-yoshino-src-templates-tag-jsx-e8745964e282084ec9f8.js"]};/*]]>*/</script><script src="/polyfill-73d6fa2ce4e36c6c5c5f.js" nomodule=""></script><script src="/component---node-modules-gatsby-theme-yoshino-src-templates-post-jsx-d071edd100249978b228.js" async=""></script><script src="/e8cd86f8f80aa61ba39f4e3852b3c68c8d3a692a-c9d797aee625080cb59d.js" async=""></script><script src="/app-a5e958c9f675828ff14f.js" async=""></script><script src="/framework-8dcaa89ad56a07169b97.js" async=""></script><script src="/webpack-runtime-f272543dd3fbb047bee1.js" async=""></script></body></html>